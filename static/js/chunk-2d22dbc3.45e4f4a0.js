(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22dbc3"],{f982:function(e,t,n){"use strict";n.r(t);var r=n("1da1"),c=(n("96cf"),n("159b"),n("b0c0"),n("7a23")),o=n("3ef4"),a=n("c9a1"),l=n("7996"),i=n("4763"),u={class:"main-container"},d=Object(c["createTextVNode"])("添加 "),b=Object(c["createTextVNode"])("编辑"),f=Object(c["createTextVNode"])("删除"),s=Object(c["createTextVNode"])("菜单权限"),O=Object(c["defineComponent"])({setup:function(e){Object(c["reactive"])({id:0,name:"",roleCode:"",description:"",createTime:""});var t={children:"children",label:"menuName"},n=Object(c["ref"])([]),O=Object(c["ref"])([]),p=Object(c["reactive"])([{label:"角色名称",type:"input",name:"name",value:"",maxLength:50,inputType:"text",placeholder:"请输入角色名称",validator:function(e){return!!e.value||(o["a"].error(e.placeholder),!1)},reset:function(){this.value=""}},{label:"角色编号",type:"input",name:"roleCode",value:"",maxLength:20,inputType:"text",placeholder:"请输入角色编号",validator:function(e){return!!e.value||(o["a"].error(e.placeholder),!1)},reset:function(){this.value=""}},{label:"角色描述",type:"input",name:"description",value:"",maxLength:50,inputType:"text",placeholder:"请输入角色描述",validator:function(e){return!!e.value||(o["a"].error(e.placeholder),!1)},reset:function(){this.value=""}}]),j=Object(c["ref"])(),v=Object(c["ref"])(),h=Object(c["ref"])(),m=Object(c["ref"])(),C=Object(l["g"])(),g=Object(l["b"])(),w=g.handleSuccess,x=g.dataList,y=g.tableLoading,k=g.tableConfig,N=Object(c["ref"])([]);function V(){C({url:i["g"],data:{}}).then((function(e){w(e)})).catch(console.log)}function _(){C({url:i["a"]}).then((function(e){N.value=e.data}))}function T(e){n.value=[],O.value=[],C({url:i["f"],data:{roleId:e.id}}).then((function(e){var t;S(e.data),null===(t=j.value)||void 0===t||t.show((function(){var e;o["a"].success("模拟菜单修改成功，数据为："+JSON.stringify(m.value.getCheckedKeys())),null===(e=j.value)||void 0===e||e.close()})),Object(c["nextTick"])((function(){m.value.setCheckedKeys(n.value)}))})).catch(console.log)}function R(){var e;p.forEach((function(e){return e.reset&&e.reset()})),null===(e=v.value)||void 0===e||e.show((function(){var e,t;a["a"].confirm("角色模拟添加成功，参数为："+JSON.stringify(null===(e=h.value)||void 0===e?void 0:e.generatorParams())),null===(t=v.value)||void 0===t||t.close()}))}function z(e){var t;p.forEach((function(t){var n=t.name;if(n){var r=e[n];r&&(t.value=e[n])}})),null===(t=v.value)||void 0===t||t.show((function(){var e,t;a["a"].confirm("角色模拟修改成功，参数为："+JSON.stringify(null===(e=h.value)||void 0===e?void 0:e.generatorParams())),null===(t=v.value)||void 0===t||t.close()}))}function L(e){a["a"].confirm("是否要删除此信息，删除后不可恢复？","提示").then((function(){a["a"].confirm("角色模拟删除成功，参数为："+JSON.stringify({id:e.id}))}))}function S(e){e.forEach((function(e){n.value.push(e.menuUrl),e.children&&(O.value.push(e.menuUrl),S(e.children))}))}return Object(c["onMounted"])(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:V();case 3:case"end":return e.stop()}}),e)})))),function(e,n){var r=Object(c["resolveComponent"])("el-button"),o=Object(c["resolveComponent"])("TableConfig"),a=Object(c["resolveComponent"])("el-table-column"),l=Object(c["resolveComponent"])("el-table"),i=Object(c["resolveComponent"])("TableBody"),C=Object(c["resolveComponent"])("BaseForm"),g=Object(c["resolveComponent"])("Dialog"),w=Object(c["resolveComponent"])("el-tree"),_=Object(c["resolveDirective"])("loading");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",u,[Object(c["createVNode"])(i,null,{tableConfig:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(o,{border:Object(c["unref"])(k).border,"onUpdate:border":n[0]||(n[0]=function(e){return Object(c["unref"])(k).border=e}),stripe:Object(c["unref"])(k).stripe,"onUpdate:stripe":n[1]||(n[1]=function(e){return Object(c["unref"])(k).stripe=e}),onRefresh:V},{actions:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(r,{type:"primary",size:"small",icon:"PlusIcon",onClick:R},{default:Object(c["withCtx"])((function(){return[d]})),_:1})]})),_:1},8,["border","stripe"])]})),default:Object(c["withCtx"])((function(){return[Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createBlock"])(l,{data:Object(c["unref"])(x),"header-cell-style":Object(c["unref"])(k).headerCellStyle,size:Object(c["unref"])(k).size,stripe:Object(c["unref"])(k).stripe,border:Object(c["unref"])(k).border},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(a,{align:"center",label:"序号",fixed:"left",width:"80"},{default:Object(c["withCtx"])((function(e){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$index+1),1)]})),_:1}),Object(c["createVNode"])(a,{align:"center",label:"角色名称",prop:"name"}),Object(c["createVNode"])(a,{align:"center",label:"角色编号",prop:"roleCode"}),Object(c["createVNode"])(a,{align:"center",label:"角色描述",prop:"description"}),Object(c["createVNode"])(a,{align:"center",label:"创建时间",prop:"createTime"}),Object(c["createVNode"])(a,{align:"center",label:"操作",width:"300px"},{default:Object(c["withCtx"])((function(e){return[Object(c["createVNode"])(r,{disabled:"ROLE_admin"===e.row.roleCode,plain:"",type:"primary",size:"small",onClick:function(t){return z(e.row)}},{default:Object(c["withCtx"])((function(){return[b]})),_:2},1032,["disabled","onClick"]),Object(c["createVNode"])(r,{disabled:"ROLE_admin"===e.row.roleCode,plain:"",type:"danger",size:"small",onClick:function(t){return L(e.row)}},{default:Object(c["withCtx"])((function(){return[f]})),_:2},1032,["disabled","onClick"]),Object(c["createVNode"])(r,{plain:"",type:"warning",size:"small",onClick:function(t){return T(e.row)}},{default:Object(c["withCtx"])((function(){return[s]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data","header-cell-style","size","stripe","border"])),[[_,Object(c["unref"])(y)]])]})),_:1}),Object(c["createVNode"])(g,{ref_key:"dialogRef",ref:v},{content:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(C,{class:"padding-left padding-right",ref_key:"baseFormRef",ref:h,"form-items":Object(c["unref"])(p)},null,8,["form-items"])]})),_:1},512),Object(c["createVNode"])(g,{ref_key:"menuDialogRef",ref:j,title:"菜单权限"},{content:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(w,{ref_key:"tree",ref:m,data:N.value,"show-checkbox":"","check-strictly":!0,"node-key":"menuUrl","default-expanded-keys":O.value,props:t},null,8,["data","default-expanded-keys"])]})),_:1},512)])}}});const p=O;t["default"]=p}}]);