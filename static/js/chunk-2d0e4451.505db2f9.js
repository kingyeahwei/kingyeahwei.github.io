(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4451"],{9004:function(e,t,n){"use strict";n.r(t);n("159b"),n("b0c0"),n("ac1f"),n("5319"),n("a434"),n("d81d");var r=n("7a23"),c=n("030a"),a=n("4763"),o=n("3ef4"),l=n("c349"),i=n("c9a1"),u=n("2ef0"),d=n.n(u),b=n("7996"),f={class:"main-container"},s=Object(r["createTextVNode"])("添加"),p=Object(r["createTextVNode"])("编辑"),v=Object(r["createTextVNode"])("删除"),O=Object(r["defineComponent"])({setup:function(e){var t="dp_code_",n=Object(r["reactive"])([{label:"部门名称",prop:"name"},{label:"部门编号",prop:"depCode"},{label:"操作",prop:"actions"}]),u=Object(r["ref"])(),O=Object(r["ref"])(),j=Object(r["ref"])("添加部门"),h=Object(b["b"])(),m=h.tableConfig,C=h.tableLoading,g=h.dataList,w=h.handleSuccess,x=Object(r["reactive"])({label:"上级部门",name:"parentId",value:0,placeholder:"请选择上级部门",selectOptions:{},reset:function(){this.value=0}}),k={label:"部门编号",type:"input",name:"depCode",value:"",maxLength:10,disabled:!1,inputType:"text",placeholder:"请输入部门编号",validator:function(e){return!!e.value||(o["a"].error(e.placeholder),!1)},reset:function(){this.value="",this.disabled=!1},render:function(e){return Object(r["h"])(l["a"],{modelValue:e.value,"onUpdate:modelValue":function(t){e.value=t},placeholder:e.placeholder},{prepend:function(){return Object(r["h"])("span",t)}})}},y=Object(r["reactive"])([{label:"部门名称",type:"input",name:"name",value:Object(r["ref"])(""),maxLength:50,inputType:"text",placeholder:"请输入部门名称",validator:function(e){return!!e.value||(o["a"].error(e.placeholder),!1)},reset:function(){this.value=""}},k]),N=function(e){var n;j.value="编辑部门",y.forEach((function(n){var r=e[n.name];r&&("depCode"===n.name?n.value=r.replace(t,""):n.value=r)})),x.value=e.parentId,k.disabled=!0,null===(n=u.value)||void 0===n||n.show((function(){var e;null!==(e=O.value)&&void 0!==e&&e.checkParams()&&(u.value.loading=!0,setTimeout((function(){var e,t;o["a"].success("模拟修改成功，添加参数为："+JSON.stringify(null===(e=O.value)||void 0===e?void 0:e.generatorParams())),null===(t=u.value)||void 0===t||t.close()}),3e3))}))},V=function(){Object(c["c"])({url:a["d"]}).then(w)};function _(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t.id)return d.a.isEmpty(r.children)?void e.splice(n,1):void o["a"].error("当前部门下有子部门，不能删除");d.a.isEmpty(r.children)||_(r.children,t)}}var T=function(e){i["a"].confirm("确定要删除此信息，删除后不可恢复？","提示").then((function(){_(g.value,e)})).catch(console.log)},B=function(){var e;j.value="添加部门",y.forEach((function(e){return e.reset()})),x.value=0,null===(e=u.value)||void 0===e||e.show((function(){var e,t;if(null!==(e=O.value)&&void 0!==e&&e.checkParams()){u.value.loading=!0;var n=null===(t=O.value)||void 0===t?void 0:t.generatorParams();n.parentId=x.value,setTimeout((function(){var e;o["a"].success("模拟添加成功，添加参数为："+JSON.stringify(n)),null===(e=u.value)||void 0===e||e.close()}),1e3)}}))};return x.selectOptions=Object(r["computed"])((function(){var e;return null===(e=g.value)||void 0===e?void 0:e.map((function(e){return{label:e.name,value:e.id}}))})),Object(r["onMounted"])(V),function(e,t){var c=Object(r["resolveComponent"])("el-button"),a=Object(r["resolveComponent"])("TableConfig"),o=Object(r["resolveComponent"])("el-table-column"),l=Object(r["resolveComponent"])("el-table"),i=Object(r["resolveComponent"])("TableBody"),d=Object(r["resolveComponent"])("TreeSelector"),b=Object(r["resolveComponent"])("el-form-item"),h=Object(r["resolveComponent"])("BaseForm"),w=Object(r["resolveComponent"])("Dialog"),k=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",f,[Object(r["createVNode"])(i,null,{tableConfig:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,{border:Object(r["unref"])(m).border,"onUpdate:border":t[0]||(t[0]=function(e){return Object(r["unref"])(m).border=e}),stripe:Object(r["unref"])(m).stripe,"onUpdate:stripe":t[1]||(t[1]=function(e){return Object(r["unref"])(m).stripe=e}),onRefresh:V},{actions:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{type:"primary",size:"small",icon:"PlusIcon",onClick:B},{default:Object(r["withCtx"])((function(){return[s]})),_:1})]})),_:1},8,["border","stripe"])]})),default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])(l,{data:Object(r["unref"])(g),"header-cell-style":Object(r["unref"])(m).headerCellStyle,size:Object(r["unref"])(m).size,stripe:Object(r["unref"])(m).stripe,border:Object(r["unref"])(m).border,"row-key":"id","tree-props":{children:"children"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{align:"center",label:"序号",fixed:"left",width:"80"},{default:Object(r["withCtx"])((function(e){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$index+1),1)]})),_:1}),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(n),(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:e.prop,label:e.label,prop:e.prop,align:"center"},Object(r["createSlots"])({_:2},["actions"===e.prop?{name:"default",fn:Object(r["withCtx"])((function(e){return[Object(r["createVNode"])(c,{plain:"",type:"primary",size:"small",onClick:function(t){return N(e.row)}},{default:Object(r["withCtx"])((function(){return[p]})),_:2},1032,["onClick"]),Object(r["createVNode"])(c,{plain:"",type:"danger",size:"small",onClick:function(t){return T(e.row)}},{default:Object(r["withCtx"])((function(){return[v]})),_:2},1032,["onClick"])]}))}:void 0]),1032,["label","prop"])})),128))]})),_:1},8,["data","header-cell-style","size","stripe","border"])),[[k,Object(r["unref"])(C)]])]})),_:1}),Object(r["createVNode"])(w,{ref_key:"dialog",ref:u,title:j.value},{content:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{class:"padding-left padding-right",ref_key:"baseForm",ref:O,"form-items":Object(r["unref"])(y)},{prefix:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{label:Object(r["unref"])(x).label},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{value:Object(r["unref"])(x).value,"onUpdate:value":t[2]||(t[2]=function(e){return Object(r["unref"])(x).value=e}),placeholder:"请选择上级部门",data:Object(r["unref"])(g),dataFields:{label:"name",value:"id"}},null,8,["value","data"])]})),_:1},8,["label"])]})),_:1},8,["form-items"])]})),_:1},8,["title"])])}}});const j=O;t["default"]=j}}]);